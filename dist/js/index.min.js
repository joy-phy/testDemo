import $ from"./library/jquery.js";import cookie from"./library/cookie.js";import"./jquery.lazyload.js";$(function(){"true"===cookie.get("isLogined")&&(console.log(cookie.get("username")),$("header>div>ul:eq(1)>li:eq(0) a").html(cookie.get("username")),$("header>div>ul:eq(1)>li:eq(1) a").html("注销"),$("header>div>ul:eq(1)>li:eq(1) a").on("click",function(){confirm("真的要走了吗")&&(cookie.remove("isLogined"),cookie.remove("username"),location.reload())}));let n=3,t,a,i=()=>($(".banner.container .wrapper").eq(n).animate({opacity:1},{duration:1e3,queue:!1}),$(".banner.container .wrapper").eq(n).siblings(".wrapper").css("opacity","0"),n++,4==n&&(n=0),$(".remotebanner").children("span").eq(n).addClass("active").siblings().removeClass("active"),i);a=setInterval(i(),4600),$(".banner.container").on("mouseleave",function(){t=setTimeout(()=>{a=setInterval(i(),4600)},2e3)}),$(".remotebanner").on("click",function(e){clearInterval(a),clearTimeout(t),$(e.target).addClass("active").siblings().removeClass("active"),0==$(e.target).index()&&(n=5),n=$(e.target).index()-1,t=setTimeout(()=>{a=setInterval(i(),4600)},2e3),$(".banner.container .wrapper").eq(n).css("opacity",1).siblings(".wrapper").css("opacity","0")}),$("footer .linkbar > ul:last-of-type a:last-of-type").mouseenter(function(){$("footer .linkbar > ul:last-of-type .binacode").css("display","block")}).mouseleave(function(){$("footer .linkbar > ul:last-of-type .binacode").css("display","none")}),$("#banner.container").on("mouseenter",function(){clearTimeout(t),clearInterval(a)});let o=0;$("main>section:eq(0)>.row.one p span").on("click",function(e){$(e.target).index()?($("main section > .row.two > .second ul.nav div.nav").css({transform:`translateX(${o-=992}px)`}),o<=-3e3&&(o=992)):(0<=o&&(o=-4e3),$("main section > .row.two > .second ul.nav div.nav").css({transform:`translateX(${o+=992}px)`}))}),$("main section:eq(2) .row.one p span").on("mouseenter",function(e){$(e.target).addClass("active").siblings().removeClass("active")});let s=new Date,e=new Date;s.setHours(e.getHours()+2),s.setMinutes(0),s.setSeconds(0);let r=s.getHours();setInterval(()=>{let e=new Date;$("main section:eq(0)> .row.two > .first p:eq(0)").html()<10?$("main section:eq(0)> .row.two > .first p:eq(0)").html(`0${r}:00 场`):$("main section:eq(0)> .row.two > .first p:eq(0)").html(`${r}:00 场`),$("main section:eq(0)> .row.two > .first p:eq(3) span:eq(0)").html()<10?$("main section:eq(0)> .row.two > .first p:eq(3) span:eq(0)").html(`0${s.getHours()-e.getHours()-1}`):$("main section:eq(0)> .row.two > .first p:eq(3) span:eq(0)").html(`${s.getHours()-e.getHours()-1}`),$("main section:eq(0)> .row.two > .first p:eq(3) span:eq(1)").html()<10?$("main section:eq(0)> .row.two > .first p:eq(3) span:eq(1)").html(`0${59-e.getMinutes()}`):$("main section:eq(0)> .row.two > .first p:eq(3) span:eq(1)").html(`${59-e.getMinutes()}`),$("main section:eq(0)> .row.two > .first p:eq(3) span:eq(2)").html()<10?$("main section:eq(0)> .row.two > .first p:eq(3) span:eq(2)").html(`0${59-e.getSeconds()}`):$("main section:eq(0)> .row.two > .first p:eq(3) span:eq(2)").html(`${59-e.getSeconds()}`)},500),$(".swiper-button-prev").on("click",function(){clearTimeout(t),clearInterval(a),n-=2,a=setInterval(i(),4600),n<0&&(n=3)}),$(".swiper-button-next").on("click",function(){clearTimeout(t),clearInterval(a),a=setInterval(i(),4600)}),$(".fixednav").on("mouseenter","li",function(){$(".fixednav-right").css({display:"block"})}).on("mouseleave","li",function(){$(".fixednav-right").css({display:"none"})}),$(".fixednav-right").on("mouseenter","ul",function(){$(this.parentNode).css({display:"block"})}).on("mouseleave","ul",function(){$(this.parentNode).css({display:"none"}),document.onmousewheel=function(){750<=document.documentElement.scrollTop?($(".removethis").remove(),$(`<div class="removethis" style="margin-top:10px;"><a href="#">
            <div>
                <span style="transform:rotate(-90deg)" class="iconfont icon-you
"></span>
                <i>回到顶部</i>
            </div>
        </a></div>`).appendTo($("aside"))):$(".removethis").remove()}}),$("nav .navbar ul.nav").on("mouseenter","li:lt(7)",function(){$("nav .navbar ul.nav .navmenu").css({height:"230px",transition:"all .3s","box-shadow":" 0 1px 3px 0 lightgray","border-top":" 1px solid lightgray"})}).on("mouseleave","li:lt(7)",function(){$("nav .navbar ul.nav .navmenu").css({height:"0px",transition:"all .3s"})}),$("nav .navbar ul.nav").on("mouseenter",".navmenu",function(){$("nav .navbar ul.nav .navmenu").css({height:"230px",transition:"all .3s","box-shadow":" 0 1px 3px 0 lightgray","border-top":" 1px solid lightgray"})}).on("mouseleave",".navmenu",function(){$("nav .navbar ul.nav .navmenu").css({height:"0px",transition:"all .3s"})}),$.ajax({type:"get",url:"../../interface/getData.php",dataType:"json"}).then(function(e){e.forEach((e,n)=>{var t=JSON.parse(e.picture);$("main>section:eq(1) .clearfix .seco .nav li").eq(n).children("a").children("div").html(`<img data-original="../${t[0].src}" alt="">`),$("main>section:eq(1) .clearfix .seco .nav li").eq(n).children("a").attr("href",`./detail.html?item=${e.id}`),$("main>section:eq(1) .clearfix .seco .nav li").eq(n).children("a").children("h3").html(e.title),$("main>section:eq(1) .clearfix .seco .nav li").eq(n).children("a").children("p").eq(0).html(e.detail),$("main>section:eq(1) .clearfix .seco .nav li").eq(n).children("a").children("p").eq(1).children("span").html(`${e.price}元起`),$("main>section:eq(1) .clearfix .seco .nav li").eq(n).children("a").children("p").eq(1).children("del").html(`${e.price}元`)}),$("img").lazyload({effect:"fadeIn",threshold:180})}).catch(function(e){console.log(e.status)})});