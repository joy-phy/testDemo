import $ from"./library/jquery.js";import cookie from"./library/cookie.js";import"./jquery.lazyload.js";$(function(){"true"===cookie.get("isLogined")&&($("header>div>ul:eq(1)>li:eq(0) a").html(cookie.get("username")),$("header>div>ul:eq(1)>li:eq(1) a").html("注销"),$("header>div>ul:eq(1)>li:eq(1) a").on("click",function(){confirm("真的要走了吗")&&(cookie.remove("isLogined"),cookie.remove("username"))}));var e=localStorage.getItem("count");e&&$(".lastone a i ").html(`(${e})`);e=location.search.split("=")[1];let t=0,n,o,i=()=>($(".wrapper").eq(t).animate({opacity:1},{duration:1e3,queue:!1}),$(".wrapper").eq(t).siblings(".wrapper").css("opacity","0"),t++,6==t&&(t=0),$(".swiper-control").children("span").eq(t).addClass("active").siblings().removeClass("active"),i);o=setInterval(i(),8e3),$(".image-left.col-6.clearfix").on("mouseleave",function(){n=setTimeout(()=>{o=setInterval(i(),8e3)},2e3)}),$(".swiper-control").on("click",function(e){clearInterval(o),clearTimeout(n),$(e.target).addClass("active").siblings().removeClass("active"),0==$(e.target).index()&&(t=7),t=$(e.target).index()-1,n=setTimeout(()=>{o=setInterval(i(),8e3)},2e3),$(".wrapper").eq(t).css("opacity",1).siblings(".wrapper").css("opacity","0")}),$("footer .linkbar > ul:last-of-type a:last-of-type").on("mouseenter",function(){$("footer .linkbar > ul:last-of-type .binacode").css("display","block")}).on("mouseleave",function(){$("footer .linkbar > ul:last-of-type .binacode").css("display","none")}),$(".image-left.col-6.clearfix").on("mouseenter",function(){clearTimeout(n),clearInterval(o)});let a=0;$("main>section:eq(0)>.row.one p span").on("click",function(e){console.log($(e.target).index()),$(e.target).index()?($("main section > .row.two > .second ul.nav div.nav").css({transform:`translateX(${a-=992}px)`}),a<=-3e3&&(a=992)):(0<=a&&(a=-4e3),$("main section > .row.two > .second ul.nav div.nav").css({transform:`translateX(${a+=992}px)`}))}),$("main section:eq(2) .row.one p span").on("mouseenter",function(e){$(e.target).addClass("active").siblings().removeClass("active")});let s=new Date,l=new Date;s.setHours(l.getHours()+2),s.setMinutes(0),s.setSeconds(0);let r=s.getHours();setInterval(()=>{let e=new Date;$("main section:eq(0)> .row.two > .first p:eq(0)").html()<10?$("main section:eq(0)> .row.two > .first p:eq(0)").html(`0${r}:00 场`):$("main section:eq(0)> .row.two > .first p:eq(0)").html(`${r}:00 场`),$("main section:eq(0)> .row.two > .first p:eq(3) span:eq(0)").html()<10?$("main section:eq(0)> .row.two > .first p:eq(3) span:eq(0)").html(`0${s.getHours()-e.getHours()-1}`):$("main section:eq(0)> .row.two > .first p:eq(3) span:eq(0)").html(`${s.getHours()-e.getHours()-1}`),$("main section:eq(0)> .row.two > .first p:eq(3) span:eq(1)").html()<10?$("main section:eq(0)> .row.two > .first p:eq(3) span:eq(1)").html(`0${59-e.getMinutes()}`):$("main section:eq(0)> .row.two > .first p:eq(3) span:eq(1)").html(`${59-e.getMinutes()}`),$("main section:eq(0)> .row.two > .first p:eq(3) span:eq(2)").html()<10?$("main section:eq(0)> .row.two > .first p:eq(3) span:eq(2)").html(`0${59-e.getSeconds()}`):$("main section:eq(0)> .row.two > .first p:eq(3) span:eq(2)").html(`${59-e.getSeconds()}`)},500),$(".swiper-button-prev").on("click",function(){clearTimeout(n),clearInterval(o),t-=2,o=setInterval(i(),8e3),t<0&&(t=5),console.log(t)}),$(".swiper-button-next").on("click",function(){clearTimeout(n),clearInterval(o),o=setInterval(i(),8e3),console.log(t)}),$(".fixednav").on("mouseenter","li",function(){$(".fixednav-right").css({display:"block"})}).on("mouseleave","li",function(){$(".fixednav-right").css({display:"none"})}),$(".fixednav-right").on("mouseenter",function(){$("#banner.container").css({display:"block"})}).on("mouseleave",function(){$("#banner.container").css({display:"none"})}),$(".fixednav-right").on("mouseenter",function(){$(this).css({display:"block"})}).on("mouseleave",function(){$(this).css({display:"none"})}),$(".togglenav").on("mouseenter",function(){$("#banner.container").css({display:"block"})}).on("mouseleave",function(){$("#banner.container").css({display:"none"})}),$(".fixednav").on("mouseenter",function(){$("#banner.container").css({display:"block"})}).on("mouseleave",function(){$("#banner.container").css({display:"none"})}),document.onmousewheel=function(){750<=document.documentElement.scrollTop?($(".removethis").remove(),$(`<div class="removethis" style="margin-top:10px;"><a href="#">
            <div>
                <span style="transform:rotate(-90deg)" class="iconfont icon-you
"></span>
                <i>回到顶部</i>
            </div>
        </a></div>`).appendTo($("aside"))):$(".removethis").remove()},$("nav .navbar ul.nav").on("mouseenter"," li:gt(0):lt(7)",function(){$("nav .navbar ul.nav .navmenu").css({height:"230px",transition:"all .3s","box-shadow":" 0 1px 3px 0 lightgray","border-top":" 1px solid lightgray"})}).on("mouseleave"," li:gt(0):lt(7)",function(){$("nav .navbar ul.nav .navmenu").css({height:"0px",transition:"all .3s"})}),$("nav .navbar ul.nav").on("mouseenter",".navmenu",function(){$("nav .navbar ul.nav .navmenu").css({height:"230px",transition:"all .3s","box-shadow":" 0 1px 3px 0 lightgray","border-top":" 1px solid lightgray"})}).on("mouseleave",".navmenu",function(){$("nav .navbar ul.nav .navmenu").css({height:"0px",transition:"all .3s"})}),$(".text-bottom div:eq(1) button").on("click",function(){$(this).addClass("active").siblings().removeClass("active")}),$(".text-bottom div:eq(2) button").on("click",function(){$(this).addClass("active").siblings().removeClass("active")}),$("#removeprevmsg").on("click",function(){$(this).parent().remove()}),window.onmousewheel=e=>{230<document.documentElement.scrollTop?$(".detail-title.one").css({height:"60px"}):$(".detail-title.one").css({height:"0px"})},$.ajax({type:"get",url:"../../interface/getitem.php",data:{id:e},dataType:"json"}).then(function(e){console.log(JSON.parse(e.picture)),JSON.parse(e.picture).forEach((e,t)=>{$(`div .wrapper:eq(${t}) a img`).attr("data-original",`../${e.src}`)}),$(".detail-title h2").html(e.title),$(".detail-title .left a").html(e.title),$(".text-top>p").eq(0).html(e.title),$(".text-top>p").eq(1).html(e.detail),$(".text-top>p").eq(3).html(`${e.price}元<del>${e.price}元</del>`),$(".text-bottom div:eq(3) .nav span:eq(0)").html(e.title),$(".text-bottom div:eq(3) .nav span:eq(1)").html(`${e.price}元<del>${e.price}元</del>`),$(".text-bottom div:eq(3)>p:eq(1)").html(`总计:${e.price}元`),$(".addcharcart").on("click",function(){!function(t,e,n,o){let i=cookie.get("shop"),a={id:t,price:e,num:"1",picture:JSON.parse(n)[0].src,title:o};i?(i=JSON.parse(i),i.some(e=>e.id===t)?(o=i.findIndex(e=>e.id===t),i[o].num=parseInt(i[o].num)+1):i.push(a)):(i=[],i.push(a));cookie.set("shop",JSON.stringify(i),1)}(e.id,e.price,e.picture,e.title)}),$("img").lazyload({effect:"fadeIn",threshold:180})}).catch(function(e){console.log(e.status)});let c=function(){let t=0,e=cookie.get("shop");e&&(e=JSON.parse(e),e.forEach(e=>{t+=parseInt(e.num)})),localStorage.setItem("count",t)}();c,$("html").on("click",function(){let e=cookie.get("shop"),t=0;e&&(e=JSON.parse(e),t=0,e.forEach(e=>{t+=parseInt(e.num)}),$(".lastone a i ").html(`(${t})`),console.log(t),e=JSON.stringify(e)),c})});